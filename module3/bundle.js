(()=>{"use strict";var e,n,t={837:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(81),o=t.n(r),i=t(645),a=t.n(i)()(o());a.push([e.id,'* {\n  box-sizing: border-box;\n  border: none;\n}\n\nul {\n  margin-block-start: 0;\n  margin-block-end: 0;\n  margin-inline-start: 0px;\n  margin-inline-end: 0px;\n  padding-inline-start: 0px;\n}\n\nhtml {\n  border: none;\n  line-height: 1.15;\n  /* 1 */\n  -webkit-text-size-adjust: 100%;\n  /* 2 */\n  box-sizing: border-box;\n  scroll-behavior: smooth;\n  margin-block-start: 0;\n  margin-block-end: 0;\n  margin-inline-start: 0;\n  margin-inline-end: 0;\n}\n\n/* Sections\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers.\n */\n\nbody {\n  border: none;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n/**\n * Render the `main` element consistently in IE.\n */\n\nmain {\n  display: block;\n  box-sizing: border-box;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box;\n  /* 1 */\n  height: 0;\n  /* 1 */\n  overflow: visible;\n  /* 2 */\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\npre {\n  font-family: monospace, monospace;\n  /* 1 */\n  font-size: 1em;\n  /* 2 */\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * Remove the gray background on active links in IE 10.\n */\n\na {\n  background-color: transparent;\n}\n\n/**\n * 1. Remove the bottom border in Chrome 57-\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none;\n  /* 1 */\n  text-decoration: underline;\n  /* 2 */\n  text-decoration: underline dotted;\n  /* 2 */\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace;\n  /* 1 */\n  font-size: 1em;\n  /* 2 */\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10.\n */\n\nimg {\n  border-style: none;\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers.\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit;\n  /* 1 */\n  font-size: 100%;\n  /* 1 */\n  line-height: 1.15;\n  /* 1 */\n  margin: 0;\n  /* 2 */\n  padding: 0;\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput {\n  /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect {\n  /* 1 */\n  text-transform: none;\n}\n\n/**\n * Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\n[type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the padding in Firefox.\n */\n\nfieldset {\n  padding: 0.35em 0.75em 0.625em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box;\n  /* 1 */\n  color: inherit;\n  /* 2 */\n  display: table;\n  /* 1 */\n  max-width: 100%;\n  /* 1 */\n  padding: 0;\n  /* 3 */\n  white-space: normal;\n  /* 1 */\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Remove the default vertical scrollbar in IE 10+.\n */\n\ntextarea {\n  overflow: auto;\n}\n\nul,\nh1,\nh2,\nh3 {\n  padding: 0;\n  margin: 0;\n  margin-block-start: 0;\n  margin-block-end: 0;\n}\n\np {\n  margin-block-start: 0;\n  margin-block-end: 0;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10.\n * 2. Remove the padding in IE 10.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box;\n  /* 1 */\n  padding: 0;\n  /* 2 */\n}\n\ninput[type="number" i] {\n  padding: 0;\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield;\n  /* 1 */\n  outline-offset: -2px;\n  /* 2 */\n}\n\n/**\n * Remove the inner padding in Chrome and Safari on macOS.\n */\n\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button;\n  /* 1 */\n  font: inherit;\n  /* 2 */\n}\n\n/* Interactive\n   ========================================================================== */\n\n/*\n * Add the correct display in Edge, IE 10+, and Firefox.\n */\n\ndetails {\n  display: block;\n}\n\n/*\n * Add the correct display in all browsers.\n */\n\nsummary {\n  display: list-item;\n}\n\n/* Misc\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 10+.\n */\n\ntemplate {\n  display: none;\n}\n\n/**\n * Add the correct display in IE 10.\n */\n\n[hidden] {\n  display: none;\n}',""]);const s=a},402:(e,n,t)=>{t.r(n),t.d(n,{default:()=>u});var r=t(81),o=t.n(r),i=t(645),a=t.n(i),s=t(837),c=a()(o());c.i(s.Z),c.push([e.id,'body {\n  font-family: Roboto, Verdana, Tahoma, Geneva, sans-serif;\n}\n\n.game-title {\n  margin: 0 auto;\n  text-align: center;\n  font-size: 80px;\n}\n\n.score-container {\n  display: flex;\n  gap: 20px;\n  width: 500px;\n  margin: 0 auto;\n  justify-content: center;\n}\n\n.score, .best-score {\n  position: relative;\n  display: block;\n  background: #bbada0;\n  padding: 0 10px;\n  font-size: 25px;\n  line-height: 40px;\n  font-weight: bold;\n  border-radius: 3px;\n  color: white;\n  margin-top: 8px;\n  text-align: center;\n}\n\n.board {\n  width: 500px;\n  margin: 15px auto;\n  padding: 5px;\n  background-color: #bbada0;\n  position: relative;\n  cursor: grab;\n  user-select: none;\n}\n\n.board__row {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 5px;\n  margin-bottom: 5px;\n  user-select: none;\n}\n\n.board__cell {\n  width: 94px;\n  height: 94px;\n  text-align: center;\n  background-color: rgba(238, 228, 218, 0.35);\n  border-radius: 3px;\n  user-select: none;\n}\n\n.board__number_new {\n  animation: appear 200ms ease 100ms;\n  animation-fill-mode: backwards;\n}\n\n.board__number {\n  width: 94px;\n  height: 94px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  background: #eee4da;\n  box-shadow: 0 0 30px 10px rgb(243 215 116 / 0%), inset 0 0 0 1px rgb(255 255 255 / 0%);\n  font-weight: bold;\n  font-size: 35px;\n  transition: all 0.1s ease-in;\n  user-select: none;\n}\n\n.popup {\n  position: fixed;\n  left: 50%;\n  z-index: 3;\n  transform: translate(-50%, -50%);\n  top: 50%;\n  flex-wrap: wrap;\n  background-color: #ffffff;\n  text-align: center;\n  color: #000;\n  width: calc(100% - 20px);\n  margin: 0 auto;\n  max-width: 400px;\n  max-height: 100%;\n  height: auto;\n  transition: all 0.2s ease 0.1s;\n  overflow-y: auto;\n}\n\n.popup-wrapper {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #29292999;\n  transition: all 0.2s ease 0.1s;\n}\n\n.popup-header {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.popup-body {\n  height: 100%;\n}\n\n.popup-title {\n  padding: 20px 0;\n}\n\n.popup-warn {\n  padding: 20px 0;\n}\n\n.popup-animated {\n  animation: appearPopup 200ms ease 100ms;\n  animation-fill-mode: backwards;\n}\n\n.popup-animate-out {\n  animation: appearPopup 200ms ease 100ms;\n  animation-direction: reverse;\n}\n\n.pagination {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n.btn:disabled {\n  background-color: red;\n}\n\n.game-btns-container {\n  display: flex;\n  width: 500px;\n  justify-content: space-between;\n  gap: 10px;\n  margin: 10px auto;\n}\n\n.btn {\n  background: #8f7a66;\n  border-radius: 3px;\n  padding: 0 10px;\n  text-decoration: none;\n  color: #f9f6f2;\n  line-height: 30px;\n  cursor: pointer;\n  display: block;\n  text-align: center;\n  flex-shrink: 0;\n}\n\n.back-btn_active {\n  background-color: green;\n}\n\n.back-btn_inactive {\n  background-color: red;\n}\n\n.time {\n  width: 100%;\n  margin: 0 auto;\n  text-align: center;\n}\n\n.results-container {\n  display: flex;\n  width: 500px;\n  justify-content: center;\n  gap: 10px;\n  margin: 0 auto;\n}\n\n.popup-btn {\n  margin: 10px auto;\n}\n\n.popup-close-btn {\n  width: 52px;\n  height: 52px;\n  font: 700 20px/0px Verdana;\n  background: none;\n  color: #000000;\n  cursor: pointer;\n}\n\n.table-header {\n  cursor: pointer;\n}\n\n.records-table {\n  margin: 20px auto;\n}\n\n.table-header_asc::after {\n  transform: rotate(-90deg);\n  color: green;\n  content: "➤";\n  font-size: 10px;\n  margin-left: 3px;\n  margin-top: 1px;\n  position: absolute;\n}\n\n.table-header_desc::after {\n  transform: rotate(90deg);\n  color: green;\n  content: "➤";\n  font-size: 10px;\n  margin-left: 3px;\n  margin-top: 1px;\n  position: absolute;\n}\n\n.instruction {\n  max-width: 500px;\n  width: 100%;\n  padding: 10px;\n  margin: 10px auto;\n  text-align: center;\n}\n\n.form {\n  padding: 20px;\n}\n\n.form__input {\n  font-family: inherit;\n  border-radius: 30px;\n  padding: 10px 20px;\n}\n\n.form__input_invalid {\n  outline: 2px solid red;\n}\n\n.form__btn {\n  display: inline-block;\n  margin-left: 15px;\n}\n\n.form__error-msg {\n  display: none;\n  font-size: 12px;\n  color: red;\n  margin-top: 10px;\n}\n\n.form__error-msg_active {\n  display: block;\n}\n\n@media screen and (max-width: 700px) {\n  .popup-button {\n    right: 0;\n  }\n  .board {\n    margin: 5px auto;\n  }\n  .board, .score-container, .game-btns-container, .results-container {\n    width: 280px;\n  }\n  .board__cell {\n    width: 50px;\n    height: 50px;\n  }\n  .board__number {\n    width: 50px;\n    height: 50px;\n  }\n  .score, .best-score {\n    font-size: 16px;\n    line-height: 24px;\n    padding: 5px;\n  }\n  .game-title {\n    font-size: 25px;\n  }\n}\n\n@keyframes appear {\n  0% {\n    opacity: 0;\n    transform: scale(0);\n  }\n  \n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes appearPopup {\n  0% {\n    opacity: 0;\n    transform: scale(0) translate(-50%, -50%);\n  }\n  \n  100% {\n    opacity: 1;\n    transform: scale(1) translate(-50%, -50%);\n  }\n}',""]);const u=c},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<e.length;u++){var d=[].concat(e[u]);r&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),n.push(d))}},n}},81:e=>{e.exports=function(e){return e[1]}},962:(e,n,t)=>{var r=t(379),o=t.n(r),i=t(795),a=t.n(i),s=t(569),c=t.n(s),u=t(565),d=t.n(u),l=t(216),p=t.n(l),h=t(589),f=t.n(h),m=t(402),b={};b.styleTagTransform=f(),b.setAttributes=d(),b.insert=c().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=p();var g=o()(m.default,b);if(!m.default.locals||e.hot.invalidate){var v=!m.default.locals,y=v?m:m.default.locals;e.hot.accept(402,(n=>{m=t(402),function(e,n,t){if(!e&&n||e&&!n)return!1;var r;for(r in e)if((!t||"default"!==r)&&e[r]!==n[r])return!1;for(r in n)if(!(t&&"default"===r||e[r]))return!1;return!0}(y,v?m:m.default.locals,v)?(y=v?m:m.default.locals,g(m.default)):e.hot.invalidate()}))}e.hot.dispose((function(){g()})),m.default&&m.default.locals&&m.default.locals},379:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],u=r.base?c[0]+r.base:c[0],d=i[u]||0,l="".concat(u," ").concat(d);i[u]=d+1;var p=t(l),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(h);else{var f=o(h,r);r.byIndex=s,n.splice(s,0,{identifier:l,updater:f,references:1})}a.push(l)}return a}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=t(i[a]);n[s].references--}for(var c=r(e,o),u=0;u<i.length;u++){var d=t(i[u]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}i=c}}},569:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},413:(e,n,t)=>{const r=function(){function e(e,n,t,r){void 0===t&&(t=""),void 0===r&&(r="");var o=document.createElement(n);o.className=t,o.textContent=r,e.append(o),this.parentNode=e,this.node=o}return e.prototype.setClass=function(e){return this.node.classList.add(e),this},e.prototype.hasClass=function(e){return this.node.classList.contains(e)},e.prototype.removeClass=function(e){return this.node.classList.remove(e),this},e.prototype.setStyle=function(e,n){return this.node.style.setProperty(e,n),this},e.prototype.getStyle=function(e){return this.node[e]},e.prototype.setAttribute=function(e,n){return this.node.setAttribute(e,n),this},e.prototype.getAttribute=function(e){return this.node.getAttribute(e)},e.prototype.removeAttribute=function(e){return this.node.removeAttribute(e),this},e.prototype.setListener=function(e,n,t){return this.node.addEventListener(e,n,t),this},e.prototype.setContent=function(e){return this.node.textContent=e,this},e.prototype.destroy=function(){this.node.remove()},e}();var o,i=(o=function(e,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},o(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}o(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)});const a=function(e){function n(n,t,o,i,a){void 0===o&&(o=""),void 0===i&&(i="");var s=e.call(this,n,t,o,i)||this;return s.prevButton=new r(s.node,"button","btn pagination__prev","Prev").setListener("click",(function(){return a(-1)})).setAttribute("aria-label","Move to previous page").setAttribute("title","Move to previous page"),s.pageNumber=new r(s.node,"div","pagination__page-number","1").setAttribute("aria-label","Page number").setAttribute("title","Page number"),s.nextButton=new r(s.node,"button","btn pagination__next","Next").setListener("click",(function(){return a(1)})).setAttribute("aria-label","Move to next page").setAttribute("title","Move to next page"),s}return i(n,e),n.prototype.setPageNumber=function(e){this.pageNumber.setContent(String(e))},n.prototype.togglePaginationButton=function(e,n){n?e.setAttribute("disabled","true"):e.removeAttribute("disabled")},n}(r);function s(e){var n=Math.floor(e/3600),t=Math.floor((e-3600*n)/60),r=e-(60*t+3600*n),o=String(n),i=String(t),a=String(r);return n<10&&(o="0".concat(n)),t<10&&(i="0".concat(t)),r<10&&(a="0".concat(r)),"".concat(o,":").concat(i,":").concat(a)}const c=function(){function e(e,n,t,o,i,a){this.gameTitle=new r(e,"h1","game-title","2048"),this.scoreContainer=new r(e,"div","score-container",""),this.score=new r(this.scoreContainer.node,"div","score","Score: 0"),this.bestScore=new r(this.scoreContainer.node,"div","best-score","Best Score: 0"),this.gameBtnsContainer=new r(e,"div","game-btns-container",""),this.restartBtn=new r(this.gameBtnsContainer.node,"button","btn restart-btn","New Game").setListener("click",(function(){n(),o(0),t()})),this.backBtn=new r(this.gameBtnsContainer.node,"button","btn back-btn","Back").setClass("back-btn_inactive").setListener("click",(function(){i()&&(n(),a())})),this.time=new r(e,"div","time","Time: 00:00:00")}return e.prototype.toggleBackBtnClass=function(e){e?(this.backBtn.setClass("back-btn_active"),this.backBtn.removeClass("back-btn_inactive")):(this.backBtn.removeClass("back-btn_active"),this.backBtn.setClass("back-btn_inactive"))},e.prototype.renderTime=function(e){this.time.setContent("Time: ".concat(s(e)))},e.prototype.renderBestScore=function(e){this.bestScore.setContent("Best Score: ".concat(String(e)))},e}();var u=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const d=function(e){function n(n,t,o,i){var a=e.call(this,n,t,o,i)||this;return a.popup=new r(a.node,"div","popup popup-animated",""),a.popup.setListener("animationend",(function(){return a.popup.removeClass("popup-animated")})),a}return u(n,e),n.prototype.destroy=function(){var e=this;this.popup.setListener("animationend",(function(){return e.node.remove()})),this.popup.setClass("popup-animate-out")},n}(r),l=function(){function e(e){this.backDrop=new d(document.body,"div","popup-wrapper",""),this.popup=this.backDrop.popup,this.popupHeader=new r(this.popup.node,"div","popup-header",""),this.popupBody=new r(this.popup.node,"div","popup-body",""),this.popupTitle=new r(this.popupBody.node,"h2","popup-title",e)}return e.prototype.renderBtn=function(e,n){new r(this.popup.node,"button","btn popup-btn",e).setListener("click",n)},e}();var p=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),h=function(e){function n(n,t,r,o,i){void 0===r&&(r=""),void 0===o&&(o="");var a=e.call(this,n,t,r,o)||this;return a.parentRow=i,a}return p(n,e),n.prototype.createNum=function(e){void 0===e&&(e="");var n=new r(this.node,"div","board__number ".concat(e),"");return n.setListener("animationend",(function(){n.node.classList.remove(e)}),{once:!0}),this.number=n,this},n.prototype.setNumContent=function(e){return this.number.setContent(String(e)),this},n.prototype.setNumPositionStyle=function(e,n,t){var r=Number(n.getStyle(t));return this.number.setStyle(e,"".concat(r,"px")),this},n}(r),f=["bestScore","score","time","board","boardsStack","scoresStack","winValue","is2048Reached","login"],m={2:"rgb(230, 230, 250)",4:"rgb(254, 222, 0)",8:"rgb(108, 119, 159)",16:"rgb(239, 60, 64)",32:"rgb(39, 252, 62)",64:"rgb(108, 143, 157)",128:"rgb(222, 118, 49)",256:"rgb(56, 119, 9)",512:"rgb(12, 130, 183)",1024:"rgb(237, 197, 63)",2048:"rgb(153, 4, 254)",4096:"rgb(250, 88, 73)"},b="https://two048-back.onrender.com/api/v1";const g=function(){function e(e){this.cells=[],this.gameBoard=new r(e,"div","board",""),this.renderBoard()}return e.prototype.renderBoard=function(){for(var e=0;e<5;e+=1){var n=new r(this.gameBoard.node,"div","board__row","");this.cells.push([]);for(var t=0;t<5;t+=1)this.cells[e].push(new h(n.node,"div","board__cell","",n))}},e.prototype.renderNum=function(e,n){var t=this.cells[e[0]][e[1]];t.createNum("board__number_new").setNumContent(n).setNumPositionStyle("left",t,"offsetLeft").setNumPositionStyle("top",t.parentRow,"offsetTop").number.setStyle("background-color",m[String(n)]||m[4096]).setStyle("font-size","".concat(40-5*String(n).length,"px"))},e.prototype.renderMerging=function(e,n,t){var r=this.cells[e][n];r.setNumContent(t).number.setStyle("font-size","".concat(40-5*String(t).length,"px")),t>4096?r.number.setStyle("background-color",m[4096]):r.number.setStyle("background-color",m[String(t)])},e.prototype.moveTo=function(e,n,t){return r=this,o=void 0,a=function(){var r,o,i;return function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(a){return r=this.cells[e[0]][e[1]],o=this.cells[n[0]][n[1]],t?(r.setNumPositionStyle("left",o,"offsetLeft").setNumPositionStyle("top",o.parentRow,"offsetTop"),i=r.number,r.number=null,[2,new Promise((function(e){i.setListener("transitionend",(function(){i.destroy(),e()}),{once:!0})}))]):(o.number=r.number,r.number=null,o.setNumPositionStyle("left",o,"offsetLeft").setNumPositionStyle("top",o.parentRow,"offsetTop"),[2,new Promise((function(e){o.number.setListener("transitionend",(function(){e()}),{once:!0})}))])}))},new((i=void 0)||(i=Promise))((function(e,n){function t(e){try{c(a.next(e))}catch(e){n(e)}}function s(e){try{c(a.throw(e))}catch(e){n(e)}}function c(n){var r;n.done?e(n.value):(r=n.value,r instanceof i?r:new i((function(e){e(r)}))).then(t,s)}c((a=a.apply(r,o||[])).next())}));var r,o,i,a},e}();var v=function(){function e(e){var n=this;this.renderScore=function(e){n.header.score.setContent("Score: ".concat(String(e)))},this.destroyNumbers=function(){n.gameView.cells.forEach((function(e){return e.forEach((function(e){e.number&&(e.number.destroy(),e.number=null)}))}))},this.parentNode=e}return e.prototype.renderPage=function(){var e=this;this.header=new c(this.parentNode,this.destroyNumbers,this.restartGame,this.renderScore,this.isBackBtnEnable,this.onBack),this.gameView=new g(this.parentNode),this.recordsContainer=new r(this.parentNode,"div","results-container",""),this.recordsBtn=new r(this.recordsContainer.node,"button","btn records-btn","Records table").setListener("click",(function(){e.pauseGame(),e.openRecordsPopup()})),this.howToPlay=new r(this.parentNode,"p","instruction","How to play: use arrow keys, swipe on phone or hold down the left mouse button and drag the mouse in different directions to move the numbers.")},e.prototype.renderLoginForm=function(){var e=this,n=new l("Login"),t=new r(n.popup.node,"form","form",""),o=new r(t.node,"input","form__input","");o.node.placeholder="Enter your name";var i=new r(t.node,"button","btn form__btn","Submit"),a=new r(t.node,"div","form__error-msg","Name must be longer than 2 symbols and don't contain numbers");i.node.type="submit",t.setListener("submit",(function(t){t.preventDefault(),o.node.value.length>=2&&null===o.node.value.match(/\d/g)?(e.onSend(o.node.value),n.backDrop.destroy()):(a.setClass("form__error-msg_active"),o.setClass("form__input_invalid"))}))},e.prototype.renderGameOverPopup=function(){var e=this,n=new l("Game over!");n.renderBtn("Try Again",(function(){n.backDrop.destroy(),e.destroyNumbers(),e.renderScore(0),e.restartGame()}))},e.prototype.renderWinPopup=function(){var e=this,n=new l("You won!");n.renderBtn("Keep Going",(function(){n.backDrop.destroy(),e.continueTimer(),e.continueGame()})),n.renderBtn("Try Again",(function(){n.backDrop.destroy(),e.destroyNumbers(),e.renderScore(0),e.restartGame()}))},e.prototype.renderRecordsPopup=function(e,n){var t=this,o=new l("Records table");o.backDrop.setListener("click",(function(e){e.target instanceof HTMLElement&&o.backDrop.node.isEqualNode(e.target)&&(o.backDrop.destroy(),t.continueGame())})),new r(o.popupHeader.node,"button","popup-close-btn","x").setListener("click",(function(){o.backDrop.destroy(),t.continueGame()})),e.length?(this.tableWrapper=new r(o.popup.node,"div","table-wrapper",""),this.renderTable(e,n),this.pagination=new a(o.popup.node,"div","pagination","",this.paginationClickHandle)):new r(o.popup.node,"div","popup-warn","There is no records")},e.prototype.editPagination=function(e,n){this.pagination.togglePaginationButton(this.pagination.prevButton,1===e),this.pagination.togglePaginationButton(this.pagination.nextButton,e===Math.ceil(n/10)),this.pagination.setPageNumber(e)},e.prototype.renderTable=function(e,n){var t=this;this.table=new r(this.tableWrapper.node,"table","records-table","");var o=new r(this.table.node,"thead","","");new r(o.node,"th","","№");var i=new r(o.node,"th","table-header time-header","Time").setListener("click",(function(){t.tbody.destroy(),t.toggleSortClass(i),t.onSort("time")})),a=new r(o.node,"th","table-header value-header","Value").setListener("click",(function(){t.tbody.destroy(),t.toggleSortClass(a),t.onSort("user")}));this.renderTableBody(e,n)},e.prototype.renderTableBody=function(e,n){this.tbody=new r(this.table.node,"tbody","","");for(var t=0;t<e.length;t++){var o=new r(this.tbody.node,"tr","","");new r(o.node,"td","","".concat(t+1+10*(n-1))),new r(o.node,"td","","".concat(s(e[t].time))),new r(o.node,"td","","".concat(e[t].user))}},e.prototype.toggleSortClass=function(e){e.hasClass("table-header_desc")?(e.removeClass("table-header_desc"),e.setClass("table-header_asc")):(e.removeClass("table-header_asc"),e.setClass("table-header_desc"))},e}(),y=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))};const w=function(){function e(){this._boardsStack=[],this.directions=["toRight","toDown","toLeft","toUp"],this.playable=!0,this.is2048Reached=!1}return Object.defineProperty(e.prototype,"boardsStack",{get:function(){return this._boardsStack},set:function(e){this._boardsStack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"board",{get:function(){return this._board},set:function(e){this._board=e},enumerable:!1,configurable:!0}),e.prototype.initGame=function(e){var n=this;if(void 0===e&&(e={}),Object.keys(e).length)this.board=JSON.parse(e.board),this.boardsStack=JSON.parse(e.boardsStack),this.board.forEach((function(e,t){return e.forEach((function(e,r){e.value&&n.onUpdateBoard([t,r],e.value)}))})),this.valueForWin=Number(e.winValue),this.is2048Reached="true"===e.is2048Reached;else{var t=new Array(5).fill(void 0).map((function(){return{value:null,isMerged:!1}}));this.board=new Array(5).fill(void 0).map((function(){return y([],t,!0)})),this.boardsStack=[],this.valueForWin=2048,this.is2048Reached=!1,this.insertRandomNum()}this.onUpdateBoardsStack(this.isPreviousBoard())},e.prototype.insertRandomNum=function(){for(var e=Math.random()<=.9?2:4,n=[Math.floor(5*Math.random()),Math.floor(5*Math.random())];this.board[Math.floor(n[0])][Math.floor(n[1])].value;)n=[Math.floor(5*Math.random()),Math.floor(5*Math.random())];this.board[n[0]][n[1]]={value:e,isMerged:!1},this.onUpdateBoard(n,e),this.checkGameStatus()},e.prototype.isPreviousBoard=function(){return!!this.boardsStack.length},e.prototype.isEmptyCell=function(){return this.board.some((function(e){return e.some((function(e){return null===e.value}))}))},e.prototype.isWin=function(){var e=this;return this.board.some((function(n){return n.some((function(n){return Number(n.value)===e.valueForWin}))}))},e.prototype.getRowByDirection=function(e,n,t){switch(e){case"toLeft":case"toRight":return n;case"toUp":return t+1;case"toDown":return 3-t}},e.prototype.getColByDirection=function(e,n,t){switch(e){case"toUp":case"toDown":return n;case"toLeft":return t+1;case"toRight":return 3-t}},e.prototype.getCellByIndexes=function(e,n,t){var r=this.getRowByDirection(e,n,t),o=this.getColByDirection(e,n,t);return{value:this.board[r][o].value,isMerged:this.board[r][o].isMerged,rowIndex:r,colIndex:o}},e.prototype.getMoveToCell=function(e,n,t,r){for(var o,i=r-1;i>=-1;i--){var a=this.getCellByIndexes(e,t,i);if(n.value&&n.value===a.value&&!a.isMerged)return{value:a.value,isMerged:a.isMerged,rowIndex:a.rowIndex,colIndex:a.colIndex};if(a.value||(o={value:a.value,isMerged:a.isMerged,rowIndex:a.rowIndex,colIndex:a.colIndex}),a.value&&a.value!==n.value)return o}return o},e.prototype.saveCurrentBoard=function(){return y([],this.board,!0).map((function(e){return e.map((function(e){return{value:e.value,isMerged:e.isMerged}}))}))},e.prototype.moveBoard=function(e){return n=this,t=void 0,o=function(){var n,t,r,o,i,a,s,c;return function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(u){switch(u.label){case 0:for(this.playable=!1,n=this.saveCurrentBoard(),t=this.getScore(),r=[],o=0;o<5;o++)for(i=0;i<4;i++)a=this.getCellByIndexes(e,o,i),s=this.getMoveToCell(e,a,o,i),a.value&&s&&(c=!1,a.value===s.value&&(c=!0,this.updateScore(a.value)),this.board[s.rowIndex][s.colIndex]={value:a.value,isMerged:c},r.push(this.moveTo([a.rowIndex,a.colIndex],[s.rowIndex,s.colIndex],c)),this.board[a.rowIndex][a.colIndex].value=null);return r.length?[4,Promise.all(r)]:[3,2];case 1:return u.sent(),this.updateBoard(n,t),[3,3];case 2:this.playable=!0,u.label=3;case 3:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((o=o.apply(n,t||[])).next())}));var n,t,r,o},e.prototype.updateBoard=function(e,n){this.boardsStack.push(e),this.onUpdateBoardsStack(this.isPreviousBoard()),this.onUpdateScoresStack(n),this.mergeNumbers(),this.insertRandomNum()},e.prototype.isMergeSiblingNumbers=function(){var e=this,n=!1;return this.directions.forEach((function(t){for(var r=0;r<5;r++)for(var o=0;o<4;o++){var i=e.getCellByIndexes(t,r,o);if(i.value){var a=e.getCellByIndexes(t,r,o-1);a.value&&i.value===a.value&&(n=!0)}}})),n},e.prototype.mergeNumbers=function(){var e=this;this.board=this.board.map((function(n,t){return n.map((function(n,r){return n.isMerged?(e.onMerge(t,r,2*n.value),{value:2*n.value,isMerged:!1}):{value:n.value,isMerged:n.isMerged}}))}))},e}();var x=function(){function e(){this.state={bestScore:"",score:"",time:"",board:"",boardsStack:"",scoresStack:"",winValue:"",is2048Reached:"",login:""}}return e.prototype.save=function(e){Object.keys(e).forEach((function(n){localStorage.setItem(n,e[n])}))},e.prototype.has=function(e){return e.every((function(e){return null!==localStorage.getItem(e)}))},e.prototype.load=function(e){var n=this;return this.has(e)?(e.forEach((function(e){n.state[e]=localStorage.getItem(e)})),this.state):{}},e}(),S=function(){function e(){this.records=[],this.pageNumber=1}return e.prototype.loadRecords=function(e){this.records=e},e.prototype.sortRecords=function(e,n){return"ASC"===n?this.records.sort((function(n,t){return n[e]>t[e]?1:-1})):"DESC"===n?this.records.sort((function(n,t){return n[e]>t[e]?-1:1})):void 0},e.prototype.getSlicedData=function(){return this.records.slice(10*(this.pageNumber-1),10*this.pageNumber)},e}(),k=function(){function e(){this.time=0}return e.prototype.initTime=function(e){void 0===e&&(e={}),Object.keys(e).length?this.time=Number(e.time):this.time=0,this.stopTimer(),this.onUpdateTime(this.time),this.startTimer()},e.prototype.startTimer=function(){var e=this;this.timer=setInterval((function(){e.time++,e.onUpdateTime(e.time)}),1e3)},e.prototype.stopTimer=function(){var e=this.timer;clearInterval(e)},e}();const _=k,M=function(){function e(){this.scoreValue=0,this.bestScoreValue=0,this.scoresStack=[]}return e.prototype.initScore=function(e){void 0===e&&(e={}),Object.keys(e).length?(this.scoresStack=JSON.parse(e.scoresStack),this.scoreValue=Number(e.score),this.bestScoreValue=Number(e.bestScore)):(this.scoresStack=[],this.scoreValue=0),this.onUpdateScore(this.scoreValue),this.onUpdateBestScore(this.bestScoreValue)},e.prototype.updateScore=function(e){this.scoreValue+=2*e,this.onUpdateScore(this.scoreValue),this.scoreValue>this.bestScoreValue&&(this.bestScoreValue=this.scoreValue,this.onUpdateBestScore(this.bestScoreValue))},e.prototype.updateScoresStack=function(e){this.scoresStack.push(e)},e}(),C=function(){function e(){this.time="ASC",this.user="ASC"}return e.prototype.changeOrder=function(e){this[e]="ASC"===this[e]?"DESC":"ASC"},e}(),E=function(e){this.name=e};var B=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((r=r.apply(e,n||[])).next())}))},I=function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const T={getUsers:function(){return B(this,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(b,"/record"))];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},addUser:function(e){return B(this,void 0,void 0,(function(){return I(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(b,"/record"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))}))},initTime:function(e){return B(this,void 0,void 0,(function(){return I(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(b,"/timer"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))}))}};var N=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((r=r.apply(e,n||[])).next())}))},P=function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},A=function(){function e(e){this.keyCodes={ArrowUp:"toUp",ArrowRight:"toRight",ArrowDown:"toDown",ArrowLeft:"toLeft"},this.timer=new _,this.score=new M,this.tableModel=new C,this.gameModel=new w,this.storageModel=new x,this.recordsModel=new S,this.view=new v(e),this.bindMethods(),this.view.renderPage(),this.bindViewMethods();var n=this.storageModel.load(f);this.gameModel.initGame(n),this.score.initScore(n),this.timer.initTime(n),this.handleKey(),this.handlePointer(),this.handleSavingState(),this.handleResize(),this.storageModel.state.login?this.user=new E(this.storageModel.state.login):(this.view.renderLoginForm(),this.gameModel.playable=!1),this.storageModel.state.time&&T.initTime({time:Number(this.storageModel.state.time)})}return e.prototype.handleResize=function(){var e=this;window.addEventListener("resize",(function(){e.view.gameView.cells.forEach((function(e){return e.forEach((function(e){e.number&&e.setNumPositionStyle("left",e,"offsetLeft").setNumPositionStyle("top",e.parentRow,"offsetTop")}))}))}))},e.prototype.bindViewMethods=function(){this.gameModel.onUpdateBoard=this.view.gameView.renderNum.bind(this.view.gameView),this.gameModel.moveTo=this.view.gameView.moveTo.bind(this.view.gameView),this.gameModel.onMerge=this.view.gameView.renderMerging.bind(this.view.gameView),this.timer.onUpdateTime=this.view.header.renderTime.bind(this.view.header),this.score.onUpdateBestScore=this.view.header.renderBestScore.bind(this.view.header),this.gameModel.onUpdateBoardsStack=this.view.header.toggleBackBtnClass.bind(this.view.header)},e.prototype.bindMethods=function(){var e=this;this.gameModel.checkGameStatus=function(){return N(e,void 0,void 0,(function(){return P(this,(function(e){switch(e.label){case 0:return this.gameModel.playable=!0,this.gameModel.isEmptyCell()||this.gameModel.isMergeSiblingNumbers()||(this.timer.stopTimer(),this.gameModel.onGameOver(),this.gameModel.playable=!1),this.gameModel.isWin()?(this.gameModel.valueForWin*=2,this.gameModel.is2048Reached?[3,2]:[4,T.addUser({user:this.user.name})]):[2];case 1:e.sent(),this.gameModel.playable=!1,this.timer.stopTimer(),this.gameModel.onWin(),this.gameModel.is2048Reached=!0,e.label=2;case 2:return[2]}}))}))},this.gameModel.updateScore=this.score.updateScore.bind(this.score),this.gameModel.onUpdateScoresStack=this.score.updateScoresStack.bind(this.score),this.gameModel.getScore=function(){return e.score.scoreValue},this.score.onUpdateScore=this.view.renderScore.bind(this.view),this.gameModel.onGameOver=this.view.renderGameOverPopup.bind(this.view),this.gameModel.onWin=this.view.renderWinPopup.bind(this.view),this.view.isBackBtnEnable=this.gameModel.isPreviousBoard.bind(this.gameModel),this.view.pauseGame=function(){return e.gameModel.playable=!1},this.view.restartGame=function(){return N(e,void 0,void 0,(function(){return P(this,(function(e){return T.initTime({time:0}),this.gameModel.initGame(),this.timer.initTime(),this.score.initScore(),[2]}))}))},this.view.onBack=function(){e.gameModel.board=e.gameModel.boardsStack.pop(),e.score.scoreValue=e.score.scoresStack.pop(),e.gameModel.board.forEach((function(n,t){return n.forEach((function(n,r){n&&n.value&&e.gameModel.onUpdateBoard([t,r],n.value)}))})),e.score.onUpdateScore(e.score.scoreValue),e.gameModel.boardsStack.length||e.gameModel.onUpdateBoardsStack(!1)},this.view.continueTimer=this.timer.startTimer.bind(this.timer),this.view.onSort=function(n){e.tableModel.changeOrder(n),e.recordsModel.sortRecords(n,e.tableModel[n]),e.view.renderTableBody(e.recordsModel.getSlicedData(),e.recordsModel.pageNumber)},this.view.paginationClickHandle=function(n){e.view.tbody.destroy(),e.recordsModel.pageNumber+=n,e.view.renderTableBody(e.recordsModel.getSlicedData(),e.recordsModel.pageNumber),e.view.editPagination(e.recordsModel.pageNumber,e.recordsModel.records.length)},this.view.continueGame=function(){return e.gameModel.playable=!0},this.view.openRecordsPopup=function(){return N(e,void 0,void 0,(function(){var e,n;return P(this,(function(t){switch(t.label){case 0:return n=(e=this.recordsModel).loadRecords,[4,T.getUsers()];case 1:return n.apply(e,[t.sent()]),this.view.renderRecordsPopup(this.recordsModel.getSlicedData(),this.recordsModel.pageNumber),this.view.editPagination(this.recordsModel.pageNumber,this.recordsModel.records.length),[2]}}))}))},this.view.onSend=function(n){e.user=new E(n),e.gameModel.playable=!0}},e.prototype.handleSavingState=function(){var e=this;window.onbeforeunload=function(){e.storageModel.save({bestScore:String(e.score.bestScoreValue),score:String(e.score.scoreValue),time:String(e.timer.time),board:JSON.stringify(e.gameModel.board),boardsStack:JSON.stringify(e.gameModel.boardsStack),scoresStack:JSON.stringify(e.score.scoresStack),winValue:String(e.gameModel.valueForWin),is2048Reached:String(e.gameModel.is2048Reached),login:e.user.name})}},e.prototype.handleKey=function(){var e=this;document.addEventListener("keydown",(function(n){var t=!1;Object.keys(e.keyCodes).forEach((function(e){n.code===e&&(t=!0)})),t&&(n.preventDefault(),e.gameModel.playable&&e.gameModel.moveBoard(e.keyCodes[String(n.code)]))}))},e.prototype.handlePointer=function(){var e,n,t,r,o,i,a,s,c=this,u=function(n){e=n.pageX,t=n.pageY,o=new Date},d=function(u){n=u.pageX,r=u.pageY,a=Math.abs(n-e),s=Math.abs(r-t),i=new Date;var d,l=a>60,p=s>60,h=i.getTime()-o.getTime()>50;l&&!p&&h&&(d=n-e>=0?"ArrowRight":"ArrowLeft"),!l&&p&&h&&(d=r-t>=0?"ArrowDown":"ArrowUp"),d&&c.gameModel.playable&&c.gameModel.moveBoard(c.keyCodes[d])};document.body.addEventListener("mousedown",(function(e){u(e)})),document.body.addEventListener("mouseup",(function(e){d(e)})),this.view.gameView.gameBoard.setListener("touchmove",(function(e){e.preventDefault()})),this.view.gameView.gameBoard.setListener("touchstart",(function(e){e.preventDefault(),u(e.touches[0])})),this.view.gameView.gameBoard.setListener("touchend",(function(e){e.preventDefault(),d(e.changedTouches[0])}))},e}();t(962),new A(document.body)}},r={};function o(e){var n=r[e];if(void 0!==n){if(void 0!==n.error)throw n.error;return n.exports}var i=r[e]={id:e,exports:{}};try{var a={id:e,module:i,factory:t[e],require:o};o.i.forEach((function(e){e(a)})),i=a.module,a.factory.call(i.exports,i,i.exports,a.require)}catch(e){throw i.error=e,e}return i.exports}o.m=t,o.c=r,o.i=[],o.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return o.d(n,{a:n}),n},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.hu=e=>e+"."+o.h()+".hot-update.js",o.hmrF=()=>"main."+o.h()+".hot-update.json",o.h=()=>"cac5296b95947320510c",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),e={},n="ratio:",o.l=(t,r,i,a)=>{if(e[t])e[t].push(r);else{var s,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var l=u[d];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==n+i){s=l;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",n+i),s.src=t),e[t]=[r];var p=(n,r)=>{s.onerror=s.onload=null,clearTimeout(h);var o=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(r))),n)return n(r)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e,n,t,r={},i=o.c,a=[],s=[],c="idle",u=0,d=[];function l(e){c=e;for(var n=[],t=0;t<s.length;t++)n[t]=s[t].call(null,e);return Promise.all(n)}function p(){0==--u&&l("ready").then((function(){if(0===u){var e=d;d=[];for(var n=0;n<e.length;n++)e[n]()}}))}function h(e){if("idle"!==c)throw new Error("check() is only allowed in idle status");return l("check").then(o.hmrM).then((function(t){return t?l("prepare").then((function(){var r=[];return n=[],Promise.all(Object.keys(o.hmrC).reduce((function(e,i){return o.hmrC[i](t.c,t.r,t.m,e,n,r),e}),[])).then((function(){return n=function(){return e?m(e):l("ready").then((function(){return r}))},0===u?n():new Promise((function(e){d.push((function(){e(n())}))}));var n}))})):l(b()?"ready":"idle").then((function(){return null}))}))}function f(e){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+c+")")})):m(e)}function m(e){e=e||{},b();var r=n.map((function(n){return n(e)}));n=void 0;var o=r.map((function(e){return e.error})).filter(Boolean);if(o.length>0)return l("abort").then((function(){throw o[0]}));var i=l("dispose");r.forEach((function(e){e.dispose&&e.dispose()}));var a,s=l("apply"),c=function(e){a||(a=e)},u=[];return r.forEach((function(e){if(e.apply){var n=e.apply(c);if(n)for(var t=0;t<n.length;t++)u.push(n[t])}})),Promise.all([i,s]).then((function(){return a?l("fail").then((function(){throw a})):t?m(e).then((function(e){return u.forEach((function(n){e.indexOf(n)<0&&e.push(n)})),e})):l("idle").then((function(){return u}))}))}function b(){if(t)return n||(n=[]),Object.keys(o.hmrI).forEach((function(e){t.forEach((function(t){o.hmrI[e](t,n)}))})),t=void 0,!0}o.hmrD=r,o.i.push((function(d){var m,b,g,v,y=d.module,w=function(n,t){var r=i[t];if(!r)return n;var o=function(o){if(r.hot.active){if(i[o]){var s=i[o].parents;-1===s.indexOf(t)&&s.push(t)}else a=[t],e=o;-1===r.children.indexOf(o)&&r.children.push(o)}else console.warn("[HMR] unexpected require("+o+") from disposed module "+t),a=[];return n(o)},s=function(e){return{configurable:!0,enumerable:!0,get:function(){return n[e]},set:function(t){n[e]=t}}};for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&"e"!==d&&Object.defineProperty(o,d,s(d));return o.e=function(e){return function(e){switch(c){case"ready":l("prepare");case"prepare":return u++,e.then(p,p),e;default:return e}}(n.e(e))},o}(d.require,d.id);y.hot=(m=d.id,b=y,v={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:g=e!==m,_requireSelf:function(){a=b.parents.slice(),e=g?void 0:m,o(m)},active:!0,accept:function(e,n,t){if(void 0===e)v._selfAccepted=!0;else if("function"==typeof e)v._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var r=0;r<e.length;r++)v._acceptedDependencies[e[r]]=n||function(){},v._acceptedErrorHandlers[e[r]]=t;else v._acceptedDependencies[e]=n||function(){},v._acceptedErrorHandlers[e]=t},decline:function(e){if(void 0===e)v._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var n=0;n<e.length;n++)v._declinedDependencies[e[n]]=!0;else v._declinedDependencies[e]=!0},dispose:function(e){v._disposeHandlers.push(e)},addDisposeHandler:function(e){v._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=v._disposeHandlers.indexOf(e);n>=0&&v._disposeHandlers.splice(n,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":n=[],Object.keys(o.hmrI).forEach((function(e){o.hmrI[e](m,n)})),l("ready");break;case"ready":Object.keys(o.hmrI).forEach((function(e){o.hmrI[e](m,n)}));break;case"prepare":case"check":case"dispose":case"apply":(t=t||[]).push(m)}},check:h,apply:f,status:function(e){if(!e)return c;s.push(e)},addStatusHandler:function(e){s.push(e)},removeStatusHandler:function(e){var n=s.indexOf(e);n>=0&&s.splice(n,1)},data:r[m]},e=void 0,v),y.parents=a,y.children=[],a=[],d.require=w})),o.hmrC={},o.hmrI={}})(),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var n=o.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var t=n.getElementsByTagName("script");t.length&&(e=t[t.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e,n,t,r,i,a=o.hmrS_jsonp=o.hmrS_jsonp||{179:0},s={};function c(n,t){return e=t,new Promise(((e,t)=>{s[n]=e;var r=o.p+o.hu(n),i=new Error;o.l(r,(e=>{if(s[n]){s[n]=void 0;var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;i.message="Loading hot update chunk "+n+" failed.\n("+r+": "+o+")",i.name="ChunkLoadError",i.type=r,i.request=o,t(i)}}))}))}function u(e){function s(e){for(var n=[e],t={},r=n.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),a=i.id,s=i.chain,u=o.c[a];if(u&&(!u.hot._selfAccepted||u.hot._selfInvalidated)){if(u.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(u.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var d=0;d<u.parents.length;d++){var l=u.parents[d],p=o.c[l];if(p){if(p.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([l]),moduleId:a,parentId:l};-1===n.indexOf(l)&&(p.hot._acceptedDependencies[a]?(t[l]||(t[l]=[]),c(t[l],[a])):(delete t[l],n.push(l),r.push({chain:s.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:n,outdatedDependencies:t}}function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];-1===e.indexOf(r)&&e.push(r)}}o.f&&delete o.f.jsonpHmr,n=void 0;var u={},d=[],l={},p=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var h in t)if(o.o(t,h)){var f,m=t[h],b=!1,g=!1,v=!1,y="";switch((f=m?s(h):{type:"disposed",moduleId:h}).chain&&(y="\nUpdate propagation: "+f.chain.join(" -> ")),f.type){case"self-declined":e.onDeclined&&e.onDeclined(f),e.ignoreDeclined||(b=new Error("Aborted because of self decline: "+f.moduleId+y));break;case"declined":e.onDeclined&&e.onDeclined(f),e.ignoreDeclined||(b=new Error("Aborted because of declined dependency: "+f.moduleId+" in "+f.parentId+y));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(f),e.ignoreUnaccepted||(b=new Error("Aborted because "+h+" is not accepted"+y));break;case"accepted":e.onAccepted&&e.onAccepted(f),g=!0;break;case"disposed":e.onDisposed&&e.onDisposed(f),v=!0;break;default:throw new Error("Unexception type "+f.type)}if(b)return{error:b};if(g)for(h in l[h]=m,c(d,f.outdatedModules),f.outdatedDependencies)o.o(f.outdatedDependencies,h)&&(u[h]||(u[h]=[]),c(u[h],f.outdatedDependencies[h]));v&&(c(d,[f.moduleId]),l[h]=p)}t=void 0;for(var w,x=[],S=0;S<d.length;S++){var k=d[S],_=o.c[k];_&&(_.hot._selfAccepted||_.hot._main)&&l[k]!==p&&!_.hot._selfInvalidated&&x.push({module:k,require:_.hot._requireSelf,errorHandler:_.hot._selfAccepted})}return{dispose:function(){var e;r.forEach((function(e){delete a[e]})),r=void 0;for(var n,t=d.slice();t.length>0;){var i=t.pop(),s=o.c[i];if(s){var c={},l=s.hot._disposeHandlers;for(S=0;S<l.length;S++)l[S].call(null,c);for(o.hmrD[i]=c,s.hot.active=!1,delete o.c[i],delete u[i],S=0;S<s.children.length;S++){var p=o.c[s.children[S]];p&&(e=p.parents.indexOf(i))>=0&&p.parents.splice(e,1)}}}for(var h in u)if(o.o(u,h)&&(s=o.c[h]))for(w=u[h],S=0;S<w.length;S++)n=w[S],(e=s.children.indexOf(n))>=0&&s.children.splice(e,1)},apply:function(n){for(var t in l)o.o(l,t)&&(o.m[t]=l[t]);for(var r=0;r<i.length;r++)i[r](o);for(var a in u)if(o.o(u,a)){var s=o.c[a];if(s){w=u[a];for(var c=[],p=[],h=[],f=0;f<w.length;f++){var m=w[f],b=s.hot._acceptedDependencies[m],g=s.hot._acceptedErrorHandlers[m];if(b){if(-1!==c.indexOf(b))continue;c.push(b),p.push(g),h.push(m)}}for(var v=0;v<c.length;v++)try{c[v].call(null,w)}catch(t){if("function"==typeof p[v])try{p[v](t,{moduleId:a,dependencyId:h[v]})}catch(r){e.onErrored&&e.onErrored({type:"accept-error-handler-errored",moduleId:a,dependencyId:h[v],error:r,originalError:t}),e.ignoreErrored||(n(r),n(t))}else e.onErrored&&e.onErrored({type:"accept-errored",moduleId:a,dependencyId:h[v],error:t}),e.ignoreErrored||n(t)}}}for(var y=0;y<x.length;y++){var S=x[y],k=S.module;try{S.require(k)}catch(t){if("function"==typeof S.errorHandler)try{S.errorHandler(t,{moduleId:k,module:o.c[k]})}catch(r){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:k,error:r,originalError:t}),e.ignoreErrored||(n(r),n(t))}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:k,error:t}),e.ignoreErrored||n(t)}}return d}}}self.webpackHotUpdateratio=(n,r,a)=>{for(var c in r)o.o(r,c)&&(t[c]=r[c],e&&e.push(c));a&&i.push(a),s[n]&&(s[n](),s[n]=void 0)},o.hmrI.jsonp=function(e,n){t||(t={},i=[],r=[],n.push(u)),o.o(t,e)||(t[e]=o.m[e])},o.hmrC.jsonp=function(e,s,d,l,p,h){p.push(u),n={},r=s,t=d.reduce((function(e,n){return e[n]=!1,e}),{}),i=[],e.forEach((function(e){o.o(a,e)&&void 0!==a[e]?(l.push(c(e,h)),n[e]=!0):n[e]=!1})),o.f&&(o.f.jsonpHmr=function(e,t){n&&o.o(n,e)&&!n[e]&&(t.push(c(e)),n[e]=!0)})},o.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(o.p+o.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))}})(),o.nc=void 0,o(413)})();